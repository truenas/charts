# TODO: Docs
# -- Global values
global:
  # -- Set additional global labels
  labels: {}
  # -- Set additional global annotations
  annotations: {}
  # -- Adds metalLB annotations to services
  addMetalLBAnnotations: false
  # -- Adds traefik annotations to services
  addTraefikAnnotations: false
  # -- Minimum nodePort value
  minNodePort: 9000

# TODO: Docs
fallbackDefaults:
  # -- Define a storageClassName that will be used for all PVCs
  # Can be overruled per PVC
  storageClass:
  # -- Default Service Protocol
  serviceProtocol: TCP
  # -- Default Service Type
  serviceType: ClusterIP
  # -- Default persistence type
  persistenceType: pvc
  # -- Default Retain PVC
  pvcRetain: false
  # -- Default PVC Size
  pvcSize: 1Gi
  # -- Default PVC Access Modes
  pvcAccessModes:
    - ReadWriteOnce

# -- Timezone used everywhere applicable
TIMEZONE: UTC

# -- Injected from SCALE middleware
# Only for reference here
ixExternalInterfacesConfiguration: []
# -- Injected from SCALE middleware
# Only for reference here
ixExternalInterfacesConfigurationNames: []
# -- Injected from SCALE middleware
# Only for reference here
ixCertificates: []
# -- Injected from SCALE middleware
# Only for reference here
ixVolumes: []

# TODO: Docs (for the imageName) convention
# -- Image values
image:
  # -- Image repository
  repository: traefik/whoami
  # -- Image tag
  tag: latest
  # -- Image pull policy
  pullPolicy: IfNotPresent


# TODO: Docs
# -- Security Context
securityContext:
  # -- Container security context for all containers
  # Can be overruled per container
  container:
    runAsNonRoot: true
    runAsUser: 568
    runAsGroup: 568
    readOnlyRootFilesystem: true
    allowPrivilegeEscalation: false
    privileged: false
    seccompProfile:
      type: RuntimeDefault
    capabilities:
      add: []
      drop:
        - ALL
  # -- Pod security context for all pods
  # Can be overruled per pod
  pod:
    fsGroup: 568
    fsGroupChangePolicy: OnRootMismatch
    supplementalGroups: []
    sysctls: []

# TODO: Docs
containerOptions:
  # -- Resources
  # Can be overruled per container
  resources:
    limits:
      cpu: 4000m
      memory: 8Gi
    requests:
      cpu: 10m
      memory: 50Mi
  # -- PUID for all containers
  # Can be overruled per container
  PUID: 568
  # -- UMASK for all containers
  # Can be overruled per container
  UMASK: "002"
  NVIDIA_CAPS:
    - all

# -- Options for all pods # TODO: Docs
# Can be overruled per pod
podOptions:
  enableServiceLinks: false
  hostNetwork: false
  restartPolicy: Always
  dnsPolicy: ClusterFirst
  dnsConfig:
    options:
      - name: ndots
        value: "2"
  hostAliases: []
  nodeSelector: {}
  tolerations: []
  schedulerName: ""
  priorityClassName: ""
  runtimeClassName: ""
  automountServiceAccountToken: false
  terminationGracePeriodSeconds: 120

# -- (docs/persistence/README.md)
# TODO: Enable any of below by default?
persistence:
  shared:
    enabled: false
    type: emptyDir
    mountPath: /shared
    targetSelectAll: true
  varlogs:
    enabled: false
    type: emptyDir
    mountPath: /var/logs
    targetSelectAll: true
  tmp:
    enabled: false
    type: emptyDir
    mountPath: /tmp
    targetSelectAll: true
  devshm:
    enabled: false
    type: emptyDir
    mountPath: /dev/shm
    targetSelectAll: true

# -- (docs/service/README.md)
service:
  main:
    enabled: true
    primary: true
    ports:
      main:
        enabled: true
        primary: true
        protocol: HTTP

# -- (docs/workload/README.md)
workload:
  main:
    enabled: true
    primary: true
    type: Deployment
    podSpec:
      # TODO: Currently implementing
      containers:
        main:
          enabled: true
          primary: true
          imageSelector: image
          securityContext:
            runAsNonRoot: true
            runAsUser: 568
            runAsGroup: 568
            readOnlyRootFilesystem: true
            allowPrivilegeEscalation: false
            privileged: false
            capabilities:
              add: []
              drop:
                - ALL
          env: {}
          envList: []
          envFrom: []
          resources:
            limits:
              cpu: 100m
              memory: 128Mi
            requests:
              cpu: 100m
              memory: 128Mi
          probes:
            liveness:
              enabled: true
              type: HTTP
              port:
              path:
              httpHeaders: {}
              command: []
            readiness:
              enabled: true
              type: HTTP
              port:
              path:
              httpHeaders: {}
              command: []
            startup:
              enabled: true
              type: HTTP
              port:
              path:
              httpHeaders: {}
              command: []
      initContainers:
        init-cont-name:
          enabled: false
          type: install
          # ...containerSpec

# -- (docs/imagePullSecrets.md)
imagePullSecret: []

# -- (docs/configmap.md)
configmap: {}

# -- (docs/secret.md)
secret: {}

# -- (docs/serviceAccount.md)
serviceAccount: {}

# -- (docs/rbac.md)
rbac: {}

# -- (docs/scaleExternalInterface.md)
scaleExternalInterface: []

# NOTES.txt TODO: Docs
notes:
  header: |
    # Welcome to SCALE
    Thank you for installing <{{ .Chart.Name }}>.
  # custom: "{{ toYaml $.Values }}"
  custom: ""
  footer: |
    # Documentation
    Documentation for this chart can be found at ...
    # Bug reports
    If you find a bug in this chart, please file an issue at ...

# TODO:
portal: {}

# -- VolumeClaimTemplates (StatefulSet only)
volumeClaimTemplates:
  # -- VolumeClaimTemplate name
  vct-name:
    # -- Enables the VolumeClaimTemplate
    enabled: true
    # -- VolumeClaimTemplate labels
    labels: {}
    # -- VolumeClaimTemplate annotations
    annotations: {}
    # -- VolumeClaimTemplate access modes
    accessModes:
      - ReadWriteOnce
    # -- VolumeClaimTemplate storage class
    storageClassName: ""
    # -- VolumeClaimTemplate size
    size: 1Gi
    # -- Options that apply to all volumeMounts
    # Can be overruled per volumeMount under targetSelector
    # -- VolumeClaimTemplate mount path
    mountPath: /data
    readOnly: false
    subPath: ""
    mountPropagation: ""
    # targetSelector:
    #   pod-name:
    #     container-name:
    #       mountPath: /data
    #       readOnly: false
    #       subPath: ""
    #       mountPropagation: ""

# -- SCALE GPU
scaleGPU:
  - gpu:
      key: value
    # Without targetSelector, the gpu will
    # be applied to primary pod/container
    targetSelector:
      pod-name:
        - container-name

# -- SCALE Certificate
scaleCertificate:
  # -- Certificate name
  cert-name:
    # -- Enables the certificate
    enabled: false
    labels: {}
    annotations: {}
    # -- Certificate ID (Comes from SCALE)
    id: 1
