groups:
  - name: Immich Configuration
    description: Configure Immich
  - name: Network Configuration
    description: Configure Network for Immich
  - name: Storage Configuration
    description: Configure Storage for Immich
  - name: Resources Configuration
    description: Configure Resources for Immich

portals:
  web_portal:
    protocols:
      - "$kubernetes-resource_configmap_portal_protocol"
    host:
      - "$kubernetes-resource_configmap_portal_host"
    ports:
      - "$kubernetes-resource_configmap_portal_port"
    path: "$kubernetes-resource_configmap_portal_path"

questions:

  # - variable: immichConfig
  #   label: ""
  #   group: Immich Configuration
  #   schema:
  #     type: dict
  #     attrs:
  #       - variable: additionalEnvs
  #         label: Additional Environment Variables
  #         description: Configure additional environment variables for Immich.
  #         schema:
  #           type: list
  #           default: []
  #           items:
  #             - variable: env
  #               label: Environment Variable
  #               schema:
  #                 type: dict
  #                 attrs:
  #                   - variable: name
  #                     label: Name
  #                     schema:
  #                       type: string
  #                       required: true
  #                   - variable: value
  #                     label: Value
  #                     schema:
  #                       type: string
  #                       required: true

  # - variable: immichNetwork
  #   label: ""
  #   group: Network Configuration
  #   schema:
  #     type: dict
  #     attrs:
  #       - variable: webPort
  #         label: Web Port
  #         description: The port for the Immich WebUI.
  #         schema:
  #           type: int
  #           default: 30008
  #           min: 9000
  #           max: 65535
  #           required: true
  #       - variable: sshPort
  #         label: SSH Port
  #         description: The port for the Immich SSH.
  #         schema:
  #           type: int
  #           default: 30009
  #           min: 9000
  #           max: 65535
  #           required: true
  #       - variable: hostNetwork
  #         label: Host Network
  #         description: |
  #           Bind to the host network. It's recommended to keep this disabled.
  #         schema:
  #           type: boolean
  #           default: false
  #       - variable: rootURL
  #         label: Root URL
  #         description: The URL that Immich will be available at.
  #         schema:
  #           type: string
  #           default: ""
  #           required: true
  #       - variable: certificateID
  #         label: Certificate
  #         description: |
  #           The certificate to use for Immich
  #         schema:
  #           type: int
  #           "null": true
  #           $ref:
  #             - "definitions/certificate"

  # - variable: immichStorage
  #   label: ""
  #   group: Storage Configuration
  #   schema:
  #     type: dict
  #     attrs:
  #       - variable: data
  #         label: Immich Data Storage
  #         description: The path to store Immich data.
  #         schema:
  #           type: dict
  #           attrs:
  #             - variable: type
  #               label: Type
  #               description: |
  #                 ixVolume: Is dataset created automatically by the system.</br>
  #                 Host Path: Is a path that already exists on the system.
  #               schema:
  #                 type: string
  #                 required: true
  #                 default: ixVolume
  #                 enum:
  #                   - value: hostPath
  #                     description: Host Path (Path that already exists on the system)
  #                   - value: ixVolume
  #                     description: ixVolume (Dataset created automatically by the system)
  #             - variable: datasetName
  #               label: Dataset Name
  #               schema:
  #                 type: string
  #                 show_if: [["type", "=", "ixVolume"]]
  #                 required: true
  #                 hidden: true
  #                 immutable: true
  #                 default: data
  #                 $ref:
  #                   - "normalize/ixVolume"
  #             - variable: hostPath
  #               label: Host Path
  #               schema:
  #                 type: hostpath
  #                 show_if: [["type", "=", "hostPath"]]
  #                 immutable: true
  #                 required: true
  #       - variable: config
  #         label: Immich Configuration Storage
  #         description: The path to store Immich configuration storage.
  #         schema:
  #           type: dict
  #           attrs:
  #             - variable: type
  #               label: Type
  #               description: |
  #                 ixVolume: Is dataset created automatically by the system.</br>
  #                 Host Path: Is a path that already exists on the system.
  #               schema:
  #                 type: string
  #                 required: true
  #                 default: ixVolume
  #                 enum:
  #                   - value: hostPath
  #                     description: Host Path (Path that already exists on the system)
  #                   - value: ixVolume
  #                     description: ixVolume (Dataset created automatically by the system)
  #             - variable: datasetName
  #               label: Dataset Name
  #               schema:
  #                 type: string
  #                 show_if: [["type", "=", "ixVolume"]]
  #                 required: true
  #                 hidden: true
  #                 immutable: true
  #                 default: config
  #                 $ref:
  #                   - "normalize/ixVolume"
  #             - variable: hostPath
  #               label: Host Path
  #               schema:
  #                 type: hostpath
  #                 show_if: [["type", "=", "hostPath"]]
  #                 immutable: true
  #                 required: true
  #       - variable: pgData
  #         label: Immich Postgres Data Storage
  #         description: The path to store Immich Postgres Data.
  #         schema:
  #           type: dict
  #           attrs:
  #             - variable: type
  #               label: Type
  #               description: |
  #                 ixVolume: Is dataset created automatically by the system.</br>
  #                 Host Path: Is a path that already exists on the system.
  #               schema:
  #                 type: string
  #                 required: true
  #                 default: ixVolume
  #                 enum:
  #                   - value: hostPath
  #                     description: Host Path (Path that already exists on the system)
  #                   - value: ixVolume
  #                     description: ixVolume (Dataset created automatically by the system)
  #             - variable: datasetName
  #               label: Dataset Name
  #               schema:
  #                 type: string
  #                 show_if: [["type", "=", "ixVolume"]]
  #                 required: true
  #                 hidden: true
  #                 immutable: true
  #                 default: pgData
  #                 $ref:
  #                   - "normalize/ixVolume"
  #             - variable: hostPath
  #               label: Host Path
  #               schema:
  #                 type: hostpath
  #                 show_if: [["type", "=", "hostPath"]]
  #                 immutable: true
  #                 required: true
  #       - variable: pgBackup
  #         label: Immich Postgres Backup Storage
  #         description: The path to store Immich Postgres Backup.
  #         schema:
  #           type: dict
  #           attrs:
  #             - variable: type
  #               label: Type
  #               description: |
  #                 ixVolume: Is dataset created automatically by the system.</br>
  #                 Host Path: Is a path that already exists on the system.
  #               schema:
  #                 type: string
  #                 required: true
  #                 default: ixVolume
  #                 enum:
  #                   - value: hostPath
  #                     description: Host Path (Path that already exists on the system)
  #                   - value: ixVolume
  #                     description: ixVolume (Dataset created automatically by the system)
  #             - variable: datasetName
  #               label: Dataset Name
  #               schema:
  #                 type: string
  #                 show_if: [["type", "=", "ixVolume"]]
  #                 required: true
  #                 hidden: true
  #                 immutable: true
  #                 default: pgBackup
  #                 $ref:
  #                   - "normalize/ixVolume"
  #             - variable: hostPath
  #               label: Host Path
  #               schema:
  #                 type: hostpath
  #                 show_if: [["type", "=", "hostPath"]]
  #                 immutable: true
  #                 required: true

  - variable: resources
    label: ""
    group: Resources Configuration
    schema:
      type: dict
      attrs:
        - variable: limits
          label: Limits
          schema:
            type: dict
            attrs:
              - variable: cpu
                label: CPU
                description: CPU limit for Immich.
                schema:
                  type: string
                  default: 4000m
                  required: true
              - variable: memory
                label: Memory
                description: Memory limit for Immich.
                schema:
                  type: string
                  default: 8Gi
                  required: true
